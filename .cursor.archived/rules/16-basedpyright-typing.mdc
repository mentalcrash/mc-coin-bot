---
description: Basedpyright Static Type Checking Rules (Strict Mode) - ì½”ë“œ ìƒì„± ì‹œ ì¦‰ì‹œ ì¤€ìˆ˜
globs: **/*.py
alwaysApply: true
---

# ğŸ” Basedpyright Typing Standards (Strict Mode)

> [!IMPORTANT]
> **ìƒì„± ì „ ê²€ì¦:** ì½”ë“œë¥¼ ì¶œë ¥í•˜ê¸° **ì§ì „**ì— ì•„ë˜ ì²´í¬ë¦¬ìŠ¤íŠ¸ë¥¼ ë¨¸ë¦¿ì†ìœ¼ë¡œ ì‹¤í–‰í•˜ì‹­ì‹œì˜¤. Ruffì™€ í•¨ê»˜ ìƒì„± í›„ ìˆ˜ì • íšŸìˆ˜ë¥¼ 0ì— ê°€ê¹ê²Œ ë§Œë“œëŠ” ê²ƒì´ ëª©í‘œì…ë‹ˆë‹¤.

> [!CAUTION]
> **`# type: ignore` / `# pyright: ignore` ì‚¬ìš© ê¸ˆì§€:** Basedpyrightë¥¼ ì£¼ì„ìœ¼ë¡œ ë¬´ë ¥í™”í•˜ëŠ” ê²ƒì€ Ruffì˜ `# noqa`ì™€ ë§ˆì°¬ê°€ì§€ë¡œ **ì ˆëŒ€ ì‚¬ìš©í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤**. ì§„ì§œ ìµœì•…ì˜ ìƒí™©ì—ì„œë§Œ ì˜ˆì™¸ì ìœ¼ë¡œ í—ˆìš©ë˜ë©°, ì‚¬ìš© ì‹œ ë°˜ë“œì‹œ **êµ¬ì²´ì ì¸ ì—ëŸ¬ ì½”ë“œ**ë¥¼ ëª…ì‹œí•´ì•¼ í•©ë‹ˆë‹¤. ê°€ëŠ¥í•˜ë©´ **íƒ€ì…ì„ ëª…ì‹œí•˜ê±°ë‚˜ êµ¬ì¡°ë¥¼ ìˆ˜ì •**í•˜ì—¬ ê·œì¹™ì„ ì¤€ìˆ˜í•˜ì‹­ì‹œì˜¤.

## 1. Code Generation Checklist (ì¶œë ¥ ì „ í•„ìˆ˜)

ì½”ë“œ ìƒì„± ì‹œ ë‹¤ìŒì„ **ë°˜ë“œì‹œ** í™•ì¸í•œ í›„ ì¶œë ¥í•˜ì‹­ì‹œì˜¤:

| # | ê·œì¹™ | í™•ì¸ |
|---|------|------|
| 1 | **ëª¨ë“  í•¨ìˆ˜/ë©”ì„œë“œ ì¸ìì— íƒ€ì… íŒíŠ¸** (reportMissingParameterType) | |
| 2 | **ëª¨ë“  í•¨ìˆ˜/ë©”ì„œë“œì— ë°˜í™˜ íƒ€ì…** `-> None` í¬í•¨ (reportReturnType) | |
| 3 | **ë‚´ì¥ ì œë„¤ë¦­ ì‚¬ìš©:** `list[]`, `dict[]`, `tuple[]` (not `List[]`, `Dict[]`) | |
| 4 | **Union:** `Union[X,Y]` ëŒ€ì‹  íŒŒì´í”„ ë¬¸ë²• ì‚¬ìš© (ì˜ˆ: `str \| None`) | |
| 5 | **Optional ì²˜ë¦¬:** None ê°€ëŠ¥ íƒ€ì… ì‚¬ìš© ì „ `if x is not None:` ë“±ìœ¼ë¡œ narrowing | |
| 6 | **ì•”ì‹œì  ë¬¸ìì—´ ì—°ê²° ê¸ˆì§€** (reportImplicitStringConcatenation) â€” Ruff ISC001ê³¼ ë™ì¼ | |
| 7 | **ê¸ˆìœµ ë°ì´í„°:** `Decimal` ì‚¬ìš©, `float` í˜¼ìš© ì‹œ ëª…ì‹œì  ë³€í™˜ | |
| 8 | **Self ë°˜í™˜:** `-> Self` (typing.Self) | |
| 9 | **íƒ€ì… ë³„ì¹­:** `type OrderID = str` (Python 3.12+) | |
| 10 | **`# type: ignore` ì‚¬ìš© ê¸ˆì§€** â€” ìµœí›„ì˜ ìˆ˜ë‹¨, ì‚¬ìš© ì‹œ ì—ëŸ¬ ì½”ë“œ ëª…ì‹œ | |

## 2. pyproject.toml ì„¤ì • ìš”ì•½

**ê¸°ë³¸:** `typeCheckingMode = "strict"`, `pythonVersion = "3.13"`, `include = ["src"]`

**í™œì„±í™”ëœ ê²€ì‚¬ (strict ëª¨ë“œ ê¸°ë³¸ + ëª…ì‹œì ):**
- `reportMissingParameterType` â€” ì¸ì íƒ€ì… í•„ìˆ˜
- `reportReturnType` â€” ë°˜í™˜ íƒ€ì… í•„ìˆ˜
- `reportImplicitStringConcatenation = true` â€” ì•”ì‹œì  ë¬¸ìì—´ ì—°ê²° ì—ëŸ¬
- `reportMissingImports = true` â€” import ì¡´ì¬ ê²€ì‚¬
- `reportOptionalMemberAccess`, `reportOptionalCall` ë“± â€” Optional ì•ˆì „ ì‚¬ìš©
- `reportArgumentType`, `reportAssignmentType` â€” íƒ€ì… í˜¸í™˜ì„±

**ë¹„í™œì„±í™”ë¨ (ì‹ ê²½ ì“°ì§€ ì•Šì•„ë„ ë¨):**
- `reportMissingTypeStubs`, `reportUnknownMemberType`, `reportUnknownArgumentType`, `reportUnknownVariableType`
- `reportUnusedImport`, `reportUnusedClass`, `reportUnusedVariable` â€” Ruffê°€ ì²˜ë¦¬
- `reportUnnecessaryCast`, `reportAny`, `reportExplicitAny`

**ë²”ìœ„:** `src/`ë§Œ ê²€ì‚¬, `tests/`, `research/` ì œì™¸

## 3. ê·œì¹™ë³„ ìƒì„¸ (ìì£¼ ìœ„ë°˜ë˜ëŠ” í•­ëª©)

### ğŸ“ íƒ€ì… íŒíŠ¸ í•„ìˆ˜
- **reportMissingParameterType:** `def foo(x):` âŒ â†’ `def foo(x: int) -> None:` âœ…
- **reportReturnType:** ë°˜í™˜ê°’ ì—†ìœ¼ë©´ `-> None` ëª…ì‹œ
- `self`, `cls`ëŠ” ì˜ˆì™¸

### ğŸ”¤ Python 3.13 ë¬¸ë²•
- **ì œë„¤ë¦­:** `list[str]`, `dict[str, int]`, `tuple[int, str]`
- **Union:** `str | None`, `int | float`
- **Type Alias:** `type Price = Decimal`
- **Self:** `def copy(self) -> Self:`

### âš ï¸ Optional ì•ˆì „ ì²˜ë¦¬
- `x: str | None`ì¼ ë•Œ `x.upper()` âŒ â€” ë¨¼ì € `if x is not None:` ë“±ìœ¼ë¡œ narrowing
- `Optional[X]` ëŒ€ì‹  `X | None` ê¶Œì¥

### ğŸ’° Decimal & ê¸ˆìœµ ë°ì´í„°
- ê°€ê²©, ìˆ˜ëŸ‰ ë“±ì€ `Decimal`
- `float` â†’ `Decimal`: `Decimal(str(val))`

### ğŸ›¡ï¸ Pydantic
- `model_validate` ì…ë ¥ íƒ€ì… ëª…í™•íˆ (ì˜ˆ: `dict[str, Any]`)

### ğŸ§© Async
- `await` ëˆ„ë½ ì‹œ `reportUnusedCoroutine` â€” ì½”ë£¨í‹´ ë°˜í™˜ê°’ì€ ë°˜ë“œì‹œ await

## 4. Ruff vs Basedpyright ì—­í•  ë¶„ë‹´
- **Ruff:** Import ì •ë¦¬, ë¯¸ì‚¬ìš© ë³€ìˆ˜, ìŠ¤íƒ€ì¼, PD/TRY/ASYNC ë“±
- **Basedpyright:** íƒ€ì… í˜¸í™˜ì„±, Optional, ë°˜í™˜ íƒ€ì…, ì•”ì‹œì  ë¬¸ìì—´ ì—°ê²°

## 5. ì˜ˆì‹œ

### âœ… ì¤€ìˆ˜ ì½”ë“œ
```python
from decimal import Decimal
from typing import Self

type OrderID = str

class Position:
    def __init__(self, symbol: str, size: Decimal) -> None:
        self.symbol: str = symbol
        self.size: Decimal = size

    def add_size(self, amount: Decimal) -> Self:
        self.size += amount
        return self

def process(order_id: OrderID, price: Decimal | None) -> None:
    if price is not None:
        print(f"{order_id}: {price}")
```

### âŒ ìœ„ë°˜ ì½”ë“œ
```python
from typing import List, Union  # Legacy

def calculate(data):  # reportMissingParameterType
    return data * 1.5  # reportReturnType ëˆ„ë½

x = calculate(10)  # xê°€ Anyë¡œ ì¶”ë¡ ë¨
```
