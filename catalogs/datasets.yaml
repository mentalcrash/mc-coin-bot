# Data Catalog — Single Source of Truth
# 데이터셋 메타데이터를 YAML로 구조화.
# 전략 발굴 시 빠른 데이터 탐색 + Python 상수 대체.

sources:
  - id: binance_spot
    name: Binance Spot
    api_url: https://api.binance.com
    date_column: timestamp
    lag_days: 0
    rate_limit_per_min: 1200

  - id: binance_futures
    name: Binance USDT-M Futures
    api_url: https://fapi.binance.com
    date_column: timestamp
    lag_days: 0
    rate_limit_per_min: 1200

  - id: defillama
    name: DeFiLlama
    api_url: https://api.llama.fi
    date_column: date
    lag_days: 1
    rate_limit_per_min: 25

  - id: coinmetrics
    name: Coin Metrics Community
    api_url: https://community-api.coinmetrics.io/v4
    date_column: time
    lag_days: 1
    rate_limit_per_min: 90

  - id: alternative_me
    name: Alternative.me
    api_url: https://api.alternative.me/fng/
    date_column: timestamp
    lag_days: 1
    rate_limit_per_min: 10

  - id: blockchain_com
    name: Blockchain.com
    api_url: https://api.blockchain.info/charts
    date_column: timestamp
    lag_days: 1
    rate_limit_per_min: 5

  - id: etherscan
    name: Etherscan
    api_url: https://api.etherscan.io/v2/api
    date_column: timestamp
    lag_days: 0
    rate_limit_per_min: 4

  - id: mempool_space
    name: mempool.space
    api_url: https://mempool.space/api/v1
    date_column: timestamp
    lag_days: 0
    rate_limit_per_min: 8

  - id: fred
    name: FRED (Federal Reserve Economic Data)
    api_url: https://api.stlouisfed.org/fred/
    date_column: date
    lag_days: 1
    rate_limit_per_min: 100

  - id: yfinance
    name: Yahoo Finance
    api_url: ""
    date_column: date
    lag_days: 0
    rate_limit_per_min: 10

  - id: deribit
    name: Deribit (Crypto Options Exchange)
    api_url: https://www.deribit.com/api/v2/public/
    date_column: date
    lag_days: 0
    rate_limit_per_min: 300

  - id: coinalyze
    name: Coinalyze (Multi-Exchange Derivatives)
    api_url: https://api.coinalyze.net/v1/
    date_column: date
    lag_days: 0
    rate_limit_per_min: 40

  - id: coingecko
    name: CoinGecko (Crypto Market Data)
    api_url: https://api.coingecko.com/api/v3/
    date_column: date
    lag_days: 0
    rate_limit_per_min: 30

  - id: hyperliquid
    name: Hyperliquid (Perp DEX)
    api_url: https://api.hyperliquid.xyz/
    date_column: date
    lag_days: 0
    rate_limit_per_min: 60

datasets:
  # ─── OHLCV ──────────────────────────────────────────────────────────
  - id: ohlcv_1m
    name: OHLCV 1-Minute
    data_type: ohlcv
    source_id: binance_spot
    batch_group: ohlcv
    description: "Binance Spot 1분봉 OHLCV (Medallion Bronze→Silver)"
    resolution: 1m
    available_since: "2017-08-17"
    storage_path: "data/silver/{SYMBOL}_1m_{YEAR}.parquet"
    columns: [open, high, low, close, volume]
    strategy_hints:
      - "모든 전략의 기본 입력 데이터"
      - "CandleAggregator로 상위 TF 변환 (1D, 4H, 1H)"
      - "volume spike → 변동성 확대 시그널"

  # ─── Derivatives ────────────────────────────────────────────────────
  - id: funding_rate
    name: Funding Rate
    data_type: derivatives
    source_id: binance_futures
    batch_group: derivatives
    description: "USDT-M Futures 8시간 Funding Rate"
    resolution: 8h
    available_since: "2019-09-10"
    storage_path: "data/silver/{SYMBOL}/{YEAR}_deriv.parquet"
    columns: [funding_rate]
    strategy_hints:
      - "극단적 양(+) funding → 과매수, 숏 시그널"
      - "극단적 음(-) funding → 과매도, 롱 시그널"
      - "funding rate z-score 기반 mean-reversion"
    silver_resample: 1h

  - id: open_interest
    name: Open Interest
    data_type: derivatives
    source_id: binance_futures
    batch_group: derivatives
    description: "USDT-M Futures 미결제약정"
    resolution: 5m
    available_since: "2019-09-10"
    storage_path: "data/silver/{SYMBOL}/{YEAR}_deriv.parquet"
    columns: [oi_sum, oi_value]
    strategy_hints:
      - "OI 급증 + 가격 상승 → 강한 추세"
      - "OI 급감 → 포지션 청산, 추세 반전 가능"
      - "OI/volume 비율 → 시장 레버리지 수준"
    silver_resample: 1h

  - id: long_short_ratio
    name: Long/Short Ratio
    data_type: derivatives
    source_id: binance_futures
    batch_group: derivatives
    description: "Top Trader Long/Short 포지션 비율"
    resolution: 5m
    available_since: "2019-09-10"
    storage_path: "data/silver/{SYMBOL}/{YEAR}_deriv.parquet"
    columns: [ls_account_ratio, ls_position_ratio]
    strategy_hints:
      - "극단적 long bias → contrarian 숏 시그널"
      - "극단적 short bias → contrarian 롱 시그널"
      - "crowd positioning 기반 alpha"
    silver_resample: 1h

  - id: taker_ratio
    name: Taker Buy/Sell Ratio
    data_type: derivatives
    source_id: binance_futures
    batch_group: derivatives
    description: "Taker 매수/매도 비율"
    resolution: 5m
    available_since: "2019-09-10"
    storage_path: "data/silver/{SYMBOL}/{YEAR}_deriv.parquet"
    columns: [taker_buy_vol, taker_sell_vol, taker_ratio]
    strategy_hints:
      - "taker ratio > 1 지속 → 매수 압력 강세"
      - "급격한 taker ratio 변화 → 시장 전환점"
    silver_resample: 1h

  - id: top_trader_account_ratio
    name: Top Trader Account L/S Ratio
    data_type: derivatives
    source_id: binance_futures
    batch_group: derivatives
    description: "Top Trader Long/Short Account Ratio (smart money 포지셔닝)"
    resolution: 5m
    available_since: "2019-09-10"
    storage_path: "data/silver/{SYMBOL}/{YEAR}_deriv.parquet"
    columns: [top_acct_ls_ratio, top_acct_long_pct, top_acct_short_pct]
    strategy_hints:
      - "Top Trader vs Global LS 괴리 → smart money divergence 시그널"
      - "Top Trader long bias 극단 → 추세 지속 가능성"
      - "Global retail과 반대 포지셔닝 → contrarian alpha"
    silver_resample: 1h

  - id: top_trader_position_ratio
    name: Top Trader Position L/S Ratio
    data_type: derivatives
    source_id: binance_futures
    batch_group: derivatives
    description: "Top Trader Long/Short Position Ratio (포지션 금액 기준)"
    resolution: 5m
    available_since: "2019-09-10"
    storage_path: "data/silver/{SYMBOL}/{YEAR}_deriv.parquet"
    columns: [top_pos_ls_ratio, top_pos_long_pct, top_pos_short_pct]
    strategy_hints:
      - "Account ratio와 Position ratio 괴리 → 대형 트레이더 편중"
      - "Position ratio 극단 → 큰 포지션 청산 리스크"
      - "Account vs Position ratio cross → 시장 전환 신호"
    silver_resample: 1h

  # ─── On-chain: Stablecoin ───────────────────────────────────────────
  - id: stablecoin_total
    name: Stablecoin Total Supply
    data_type: onchain
    source_id: defillama
    batch_group: stablecoin
    description: "전체 스테이블코인 발행량 (DeFiLlama)"
    resolution: 1d
    available_since: "2019-01-01"
    storage_path: "data/silver/onchain/defillama/stablecoin_total.parquet"
    columns: [total_circulating_usd, total_circulating_usd_peg]
    fetch_key: stablecoin_total
    strategy_hints:
      - "발행량 증가 → 시장 유동성 유입, 강세 신호"
      - "발행량 감소 → 자금 이탈, risk-off"
      - "변화율 z-score → regime indicator"
    enrichment:
      scope: global
      columns: [total_circulating_usd]
      rename_map:
        total_circulating_usd: oc_stablecoin_total_usd

  - id: stablecoin_chain_Ethereum
    name: Stablecoin Supply (Ethereum)
    data_type: onchain
    source_id: defillama
    batch_group: stablecoin
    description: "Ethereum 체인 스테이블코인 발행량"
    resolution: 1d
    available_since: "2019-01-01"
    storage_path: "data/silver/onchain/defillama/stablecoin_chain_Ethereum.parquet"
    columns: [total_circulating_usd]
    fetch_key: stablecoin_chain_Ethereum
    strategy_hints:
      - "DeFi 유동성 프록시"
      - "체인 간 자금 이동 모니터링"

  - id: stablecoin_chain_Tron
    name: Stablecoin Supply (Tron)
    data_type: onchain
    source_id: defillama
    batch_group: stablecoin
    description: "Tron 체인 스테이블코인 발행량"
    resolution: 1d
    available_since: "2019-01-01"
    storage_path: "data/silver/onchain/defillama/stablecoin_chain_Tron.parquet"
    columns: [total_circulating_usd]
    fetch_key: stablecoin_chain_Tron
    strategy_hints:
      - "아시아 리테일 자금 흐름 프록시"
      - "Tron 비중 증가 → 거래소 입금 활동"

  - id: stablecoin_chain_BSC
    name: Stablecoin Supply (BSC)
    data_type: onchain
    source_id: defillama
    batch_group: stablecoin
    description: "BSC 체인 스테이블코인 발행량"
    resolution: 1d
    available_since: "2020-09-01"
    storage_path: "data/silver/onchain/defillama/stablecoin_chain_BSC.parquet"
    columns: [total_circulating_usd]
    fetch_key: stablecoin_chain_BSC
    strategy_hints:
      - "리테일 DeFi 활동 지표"

  - id: stablecoin_chain_Arbitrum
    name: Stablecoin Supply (Arbitrum)
    data_type: onchain
    source_id: defillama
    batch_group: stablecoin
    description: "Arbitrum 체인 스테이블코인 발행량"
    resolution: 1d
    available_since: "2021-09-01"
    storage_path: "data/silver/onchain/defillama/stablecoin_chain_Arbitrum.parquet"
    columns: [total_circulating_usd]
    fetch_key: stablecoin_chain_Arbitrum
    strategy_hints:
      - "L2 생태계 성장 지표"

  - id: stablecoin_chain_Solana
    name: Stablecoin Supply (Solana)
    data_type: onchain
    source_id: defillama
    batch_group: stablecoin
    description: "Solana 체인 스테이블코인 발행량"
    resolution: 1d
    available_since: "2021-01-01"
    storage_path: "data/silver/onchain/defillama/stablecoin_chain_Solana.parquet"
    columns: [total_circulating_usd]
    fetch_key: stablecoin_chain_Solana
    strategy_hints:
      - "Solana 생태계 활성도 지표"

  - id: stablecoin_usdt
    name: USDT Supply
    data_type: onchain
    source_id: defillama
    batch_group: stablecoin
    description: "USDT 개별 발행량"
    resolution: 1d
    available_since: "2017-01-01"
    storage_path: "data/silver/onchain/defillama/stablecoin_usdt.parquet"
    columns: [circulating_usd]
    fetch_key: stablecoin_usdt
    strategy_hints:
      - "USDT 발행량 변화 → 시장 유입/유출"
      - "USDT dominance 변화 → 시장 선호도"
    enrichment:
      scope: global
      columns: [circulating_usd]
      rename_map:
        circulating_usd: oc_stablecoin_usdt_usd

  - id: stablecoin_usdc
    name: USDC Supply
    data_type: onchain
    source_id: defillama
    batch_group: stablecoin
    description: "USDC 개별 발행량"
    resolution: 1d
    available_since: "2018-10-01"
    storage_path: "data/silver/onchain/defillama/stablecoin_usdc.parquet"
    columns: [circulating_usd]
    fetch_key: stablecoin_usdc
    strategy_hints:
      - "기관 자금 프록시 (USDC = 규제 준수)"
      - "USDT/USDC 비율 → 기관 vs 리테일 자금"
    enrichment:
      scope: global
      columns: [circulating_usd]
      rename_map:
        circulating_usd: oc_stablecoin_usdc_usd

  # ─── On-chain: TVL ──────────────────────────────────────────────────
  - id: tvl_total
    name: DeFi TVL Total
    data_type: onchain
    source_id: defillama
    batch_group: tvl
    description: "전체 DeFi TVL (Total Value Locked)"
    resolution: 1d
    available_since: "2019-01-01"
    storage_path: "data/silver/onchain/defillama/tvl_total.parquet"
    columns: [tvl_usd]
    fetch_key: tvl_total
    strategy_hints:
      - "TVL 증가 → DeFi 신뢰도 상승, risk-on"
      - "TVL/MarketCap 비율 → DeFi 침투율"
      - "TVL 급락 → 프로토콜 위기, risk-off"
    enrichment:
      scope: global
      columns: [tvl_usd]
      rename_map:
        tvl_usd: oc_tvl_usd

  - id: tvl_chain_Ethereum
    name: DeFi TVL (Ethereum)
    data_type: onchain
    source_id: defillama
    batch_group: tvl
    description: "Ethereum 체인 DeFi TVL"
    resolution: 1d
    available_since: "2019-01-01"
    storage_path: "data/silver/onchain/defillama/tvl_chain_Ethereum.parquet"
    columns: [tvl_usd]
    fetch_key: tvl_chain_Ethereum
    strategy_hints:
      - "ETH TVL dominance → Ethereum 생태계 건강도"
      - "ETH TVL vs ETH price 디커플링 → 기회"

  - id: tvl_chain_Tron
    name: DeFi TVL (Tron)
    data_type: onchain
    source_id: defillama
    batch_group: tvl
    description: "Tron 체인 DeFi TVL"
    resolution: 1d
    available_since: "2020-01-01"
    storage_path: "data/silver/onchain/defillama/tvl_chain_Tron.parquet"
    columns: [tvl_usd]
    fetch_key: tvl_chain_Tron
    strategy_hints:
      - "Tron TVL 급등 → 아시아 자금 유입"

  - id: tvl_chain_BSC
    name: DeFi TVL (BSC)
    data_type: onchain
    source_id: defillama
    batch_group: tvl
    description: "BSC 체인 DeFi TVL"
    resolution: 1d
    available_since: "2020-09-01"
    storage_path: "data/silver/onchain/defillama/tvl_chain_BSC.parquet"
    columns: [tvl_usd]
    fetch_key: tvl_chain_BSC
    strategy_hints:
      - "리테일 DeFi 활동 지표"

  - id: tvl_chain_Arbitrum
    name: DeFi TVL (Arbitrum)
    data_type: onchain
    source_id: defillama
    batch_group: tvl
    description: "Arbitrum 체인 DeFi TVL"
    resolution: 1d
    available_since: "2021-09-01"
    storage_path: "data/silver/onchain/defillama/tvl_chain_Arbitrum.parquet"
    columns: [tvl_usd]
    fetch_key: tvl_chain_Arbitrum
    strategy_hints:
      - "L2 성장 모니터링"

  - id: tvl_chain_Solana
    name: DeFi TVL (Solana)
    data_type: onchain
    source_id: defillama
    batch_group: tvl
    description: "Solana 체인 DeFi TVL"
    resolution: 1d
    available_since: "2021-01-01"
    storage_path: "data/silver/onchain/defillama/tvl_chain_Solana.parquet"
    columns: [tvl_usd]
    fetch_key: tvl_chain_Solana
    strategy_hints:
      - "Solana DeFi 생태계 성장도"

  # ─── On-chain: DEX ──────────────────────────────────────────────────
  - id: dex_volume
    name: DEX Volume
    data_type: onchain
    source_id: defillama
    batch_group: dex
    description: "전체 DEX 일일 거래량"
    resolution: 1d
    available_since: "2019-01-01"
    storage_path: "data/silver/onchain/defillama/dex_volume.parquet"
    columns: [volume_usd]
    fetch_key: dex_volume
    strategy_hints:
      - "DEX volume spike → 높은 시장 활성도"
      - "DEX/CEX 비율 → 탈중앙화 추세"
      - "DEX volume 이동평균 돌파 → 활동 확대"
    enrichment:
      scope: global
      columns: [volume_usd]
      rename_map:
        volume_usd: oc_dex_volume_usd

  # ─── On-chain: Coin Metrics ────────────────────────────────────────
  - id: btc_metrics
    name: BTC On-chain Metrics
    data_type: onchain
    source_id: coinmetrics
    batch_group: coinmetrics
    description: "Bitcoin 온체인 메트릭 12종 (MVRV, MarketCap, Exchange Flow 등)"
    resolution: 1d
    available_since: "2009-01-03"
    storage_path: "data/silver/onchain/coinmetrics/btc_metrics.parquet"
    columns: [AdrActCnt, TxCnt, CapMVRVCur, CapMrktCurUSD, FlowInExUSD, FlowOutExUSD, TxTfrCnt, ROI30d, HashRate, SplyCur, IssTotUSD, BlkCnt]
    fetch_key: btc_metrics
    strategy_hints:
      - "MVRV < 1 → 역사적 저점, 축적 구간"
      - "MVRV > 3.5 → 과열, 분배 구간"
      - "Exchange Net Flow (In-Out) → 매도/매수 압력"
      - "Active Address 추세 → 네트워크 활성도"
    enrichment:
      scope: asset
      target_assets: [BTC]
      columns: [CapMVRVCur, CapMrktCurUSD, FlowInExUSD, FlowOutExUSD]
      rename_map:
        CapMVRVCur: oc_mvrv
        CapMrktCurUSD: oc_mktcap_usd
        FlowInExUSD: oc_flow_in_ex_usd
        FlowOutExUSD: oc_flow_out_ex_usd

  - id: eth_metrics
    name: ETH On-chain Metrics
    data_type: onchain
    source_id: coinmetrics
    batch_group: coinmetrics
    description: "Ethereum 온체인 메트릭 12종"
    resolution: 1d
    available_since: "2015-07-30"
    storage_path: "data/silver/onchain/coinmetrics/eth_metrics.parquet"
    columns: [AdrActCnt, TxCnt, CapMVRVCur, CapMrktCurUSD, FlowInExUSD, FlowOutExUSD, TxTfrCnt, ROI30d, HashRate, SplyCur, IssTotUSD, BlkCnt]
    fetch_key: eth_metrics
    strategy_hints:
      - "ETH MVRV → BTC와 동일 논리"
      - "Gas Fee 추세 → 네트워크 수요"
      - "ETH Exchange Net Flow → 스테이킹 vs 매도"
    enrichment:
      scope: asset
      target_assets: [ETH]
      columns: [CapMVRVCur, CapMrktCurUSD, FlowInExUSD, FlowOutExUSD]
      rename_map:
        CapMVRVCur: oc_mvrv
        CapMrktCurUSD: oc_mktcap_usd
        FlowInExUSD: oc_flow_in_ex_usd
        FlowOutExUSD: oc_flow_out_ex_usd

  # ─── On-chain: Sentiment ───────────────────────────────────────────
  - id: fear_greed
    name: Fear & Greed Index
    data_type: onchain
    source_id: alternative_me
    batch_group: sentiment
    description: "Crypto Fear & Greed Index (0-100)"
    resolution: 1d
    available_since: "2018-02-01"
    storage_path: "data/silver/onchain/alternative_me/fear_greed.parquet"
    columns: [value, classification]
    fetch_key: fear_greed
    strategy_hints:
      - "Extreme Fear (< 20) → contrarian 매수"
      - "Extreme Greed (> 80) → contrarian 매도"
      - "이동평균 crossover → regime 전환"
    enrichment:
      scope: global
      columns: [value]
      rename_map:
        value: oc_fear_greed

  # ─── On-chain: Blockchain ──────────────────────────────────────────
  - id: bc_hash-rate
    name: BTC Hash Rate
    data_type: onchain
    source_id: blockchain_com
    batch_group: blockchain
    description: "Bitcoin 네트워크 해시레이트"
    resolution: 1d
    available_since: "2009-01-03"
    storage_path: "data/silver/onchain/blockchain_com/bc_hash-rate.parquet"
    columns: [value]
    fetch_key: bc_hash-rate
    strategy_hints:
      - "Hash rate 지속 상승 → 채굴자 신뢰, 강세"
      - "Hash rate 급락 → 채굴자 항복, 바닥 시그널"
      - "Hash rate vs Price 다이버전스"
    enrichment:
      scope: asset
      target_assets: [BTC]
      columns: [value]
      rename_map:
        value: oc_hash_rate

  - id: bc_miners-revenue
    name: BTC Miners Revenue
    data_type: onchain
    source_id: blockchain_com
    batch_group: blockchain
    description: "Bitcoin 채굴자 일일 수익"
    resolution: 1d
    available_since: "2009-01-03"
    storage_path: "data/silver/onchain/blockchain_com/bc_miners-revenue.parquet"
    columns: [value]
    fetch_key: bc_miners-revenue
    strategy_hints:
      - "채굴자 수익 감소 → 매도 압력 가능성"
      - "Halving 전후 수익 변화 → 시장 사이클"

  - id: bc_transaction-fees-usd
    name: BTC Transaction Fees
    data_type: onchain
    source_id: blockchain_com
    batch_group: blockchain
    description: "Bitcoin 일일 트랜잭션 수수료 (USD)"
    resolution: 1d
    available_since: "2009-01-03"
    storage_path: "data/silver/onchain/blockchain_com/bc_transaction-fees-usd.parquet"
    columns: [value]
    fetch_key: bc_transaction-fees-usd
    strategy_hints:
      - "수수료 급등 → 네트워크 혼잡, 높은 수요"
      - "수수료/Revenue 비율 → 네트워크 보안 지속성"

  # ─── On-chain: Etherscan ───────────────────────────────────────────
  - id: eth_supply
    name: ETH Supply
    data_type: onchain
    source_id: etherscan
    batch_group: etherscan
    description: "ETH 총 공급량 + ETH2 스테이킹량"
    resolution: 1d
    available_since: "2015-07-30"
    storage_path: "data/silver/onchain/etherscan/eth_supply.parquet"
    columns: [eth_supply, eth2_staking]
    fetch_key: eth_supply
    strategy_hints:
      - "EIP-1559 이후 burn > issuance → deflationary signal"
      - "스테이킹 비율 증가 → 유통 공급 감소"
    enrichment:
      scope: asset
      target_assets: [ETH]
      columns: [eth_supply, eth2_staking]
      rename_map: {}

  # ─── On-chain: Mempool ─────────────────────────────────────────────
  - id: mining
    name: BTC Mining Stats
    data_type: onchain
    source_id: mempool_space
    batch_group: mempool
    description: "Bitcoin 마이닝 통계 (해시레이트, 난이도)"
    resolution: 1d
    available_since: "2016-01-01"
    storage_path: "data/silver/onchain/mempool_space/mining.parquet"
    columns: [avg_hashrate, difficulty]
    fetch_key: mining
    strategy_hints:
      - "난이도 조정 후 가격 반응 패턴"
      - "실시간 해시레이트 변화 → 채굴자 활동"
    enrichment:
      scope: asset
      target_assets: [BTC]
      columns: [avg_hashrate, difficulty]
      rename_map: {}

  # ─── Macro: FRED ──────────────────────────────────────────────────
  - id: fred_dxy
    name: US Dollar Index (DXY)
    data_type: macro
    source_id: fred
    batch_group: fred
    description: "Trade Weighted U.S. Dollar Index: Broad, Goods (DTWEXBGS)"
    resolution: 1d
    available_since: "2006-01-02"
    storage_path: "data/silver/macro/fred/dxy.parquet"
    columns: [value]
    fetch_key: dxy
    strategy_hints:
      - "BTC-DXY 역상관 (-0.6~-0.8)"
      - "DXY 하락 → 위험자산 선호, crypto 강세"
      - "DXY 급등 → risk-off, crypto 약세"
    enrichment:
      scope: global
      columns: [value]
      rename_map:
        value: macro_dxy

  - id: fred_gold
    name: Gold Price (London PM Fix)
    data_type: macro
    source_id: fred
    batch_group: fred
    description: "Gold Fixing Price in London Bullion Market (GOLDAMGBD228NLBM)"
    resolution: 1d
    available_since: "1968-04-01"
    storage_path: "data/silver/macro/fred/gold.parquet"
    columns: [value]
    fetch_key: gold
    strategy_hints:
      - "Gold 상승 + BTC 상승 → 인플레이션 헤지 내러티브"
      - "Gold/BTC 비율 → 디지털 골드 서사 강도"
    enrichment:
      scope: global
      columns: [value]
      rename_map:
        value: macro_gold

  - id: fred_dgs10
    name: 10-Year Treasury Yield
    data_type: macro
    source_id: fred
    batch_group: fred
    description: "Market Yield on U.S. Treasury Securities at 10-Year Constant Maturity (DGS10)"
    resolution: 1d
    available_since: "1962-01-02"
    storage_path: "data/silver/macro/fred/dgs10.parquet"
    columns: [value]
    fetch_key: dgs10
    strategy_hints:
      - "금리 상승 → 위험자산 약세 압력"
      - "실질금리(명목-기대인플) → BTC 기회비용"
    enrichment:
      scope: global
      columns: [value]
      rename_map:
        value: macro_dgs10

  - id: fred_dgs2
    name: 2-Year Treasury Yield
    data_type: macro
    source_id: fred
    batch_group: fred
    description: "Market Yield on U.S. Treasury Securities at 2-Year Constant Maturity (DGS2)"
    resolution: 1d
    available_since: "1976-06-01"
    storage_path: "data/silver/macro/fred/dgs2.parquet"
    columns: [value]
    fetch_key: dgs2
    strategy_hints:
      - "2Y yield → Fed 금리 기대 프록시"
      - "2Y-10Y spread와 함께 사용"
    enrichment:
      scope: global
      columns: [value]
      rename_map:
        value: macro_dgs2

  - id: fred_t10y2y
    name: 10Y-2Y Treasury Spread
    data_type: macro
    source_id: fred
    batch_group: fred
    description: "10-Year Treasury Constant Maturity Minus 2-Year (T10Y2Y)"
    resolution: 1d
    available_since: "1976-06-01"
    storage_path: "data/silver/macro/fred/t10y2y.parquet"
    columns: [value]
    fetch_key: t10y2y
    strategy_hints:
      - "역전(음수) → 경기침체 선행지표"
      - "정상화(양수 전환) → risk-on 시그널"
    enrichment:
      scope: global
      columns: [value]
      rename_map:
        value: macro_yield_curve

  - id: fred_vix
    name: VIX (CBOE Volatility Index)
    data_type: macro
    source_id: fred
    batch_group: fred
    description: "CBOE Volatility Index: VIX (VIXCLS)"
    resolution: 1d
    available_since: "1990-01-02"
    storage_path: "data/silver/macro/fred/vix.parquet"
    columns: [value]
    fetch_key: vix
    strategy_hints:
      - "VIX > 30 → extreme fear, 역발상 매수 기회"
      - "VIX < 15 → 과도한 안정, 급변 전조"
      - "VIX regime filter → 고변동/저변동 전략 분리"
    enrichment:
      scope: global
      columns: [value]
      rename_map:
        value: macro_vix

  - id: fred_m2
    name: M2 Money Supply
    data_type: macro
    source_id: fred
    batch_group: fred
    description: "M2 Money Stock (M2SL, Monthly, T+14 lag)"
    resolution: 1m
    available_since: "1959-01-01"
    storage_path: "data/silver/macro/fred/m2.parquet"
    columns: [value]
    fetch_key: m2
    lag_days: 14
    strategy_hints:
      - "M2 증가 → 유동성 확대, 자산가격 상승 선행"
      - "M2 YoY 변화율 → 매크로 regime indicator"
      - "T+14 publication lag 주의 (look-ahead bias)"
    enrichment:
      scope: global
      columns: [value]
      rename_map:
        value: macro_m2

  # ─── Macro: yfinance ──────────────────────────────────────────────
  - id: yf_spy
    name: SPY (S&P 500 ETF)
    data_type: macro
    source_id: yfinance
    batch_group: yfinance
    description: "SPDR S&P 500 ETF Trust — 미국 주식시장 벤치마크"
    resolution: 1d
    available_since: "1993-01-29"
    storage_path: "data/silver/macro/yfinance/spy.parquet"
    columns: [close]
    fetch_key: spy
    strategy_hints:
      - "SPY-BTC 상관관계 → risk-on/off regime"
      - "SPY 급락 → crypto 동반 하락 가능성"
    enrichment:
      scope: global
      columns: [close]
      rename_map:
        close: macro_spy_close

  - id: yf_qqq
    name: QQQ (Nasdaq-100 ETF)
    data_type: macro
    source_id: yfinance
    batch_group: yfinance
    description: "Invesco QQQ Trust — 나스닥 100 추종 ETF"
    resolution: 1d
    available_since: "1999-03-10"
    storage_path: "data/silver/macro/yfinance/qqq.parquet"
    columns: [close]
    fetch_key: qqq
    strategy_hints:
      - "QQQ → Tech 섹터 심리 프록시"
      - "BTC-QQQ 상관 > BTC-SPY 상관 → 테크주 동조"
    enrichment:
      scope: global
      columns: [close]
      rename_map:
        close: macro_qqq_close

  - id: yf_gld
    name: GLD (Gold ETF)
    data_type: macro
    source_id: yfinance
    batch_group: yfinance
    description: "SPDR Gold Shares — 금 가격 추종 ETF"
    resolution: 1d
    available_since: "2004-11-18"
    storage_path: "data/silver/macro/yfinance/gld.parquet"
    columns: [close]
    fetch_key: gld
    strategy_hints:
      - "GLD vs BTC → 디지털 골드 내러티브 검증"
      - "GLD 상승 + BTC 상승 → safe-haven 수요"
    enrichment:
      scope: global
      columns: [close]
      rename_map:
        close: macro_gld_close

  - id: yf_tlt
    name: TLT (20+ Year Treasury ETF)
    data_type: macro
    source_id: yfinance
    batch_group: yfinance
    description: "iShares 20+ Year Treasury Bond ETF — 장기 국채"
    resolution: 1d
    available_since: "2002-07-30"
    storage_path: "data/silver/macro/yfinance/tlt.parquet"
    columns: [close]
    fetch_key: tlt
    strategy_hints:
      - "TLT 상승 → 금리 하락 → risk-on 환경"
      - "TLT 급락 → 금리 급등 → crypto 약세"
    enrichment:
      scope: global
      columns: [close]
      rename_map:
        close: macro_tlt_close

  - id: yf_uup
    name: UUP (US Dollar ETF)
    data_type: macro
    source_id: yfinance
    batch_group: yfinance
    description: "Invesco DB US Dollar Index Bullish Fund — 달러 인덱스 ETF"
    resolution: 1d
    available_since: "2007-02-20"
    storage_path: "data/silver/macro/yfinance/uup.parquet"
    columns: [close]
    fetch_key: uup
    strategy_hints:
      - "UUP → FRED DXY의 실시간 대안 (T+0)"
      - "UUP 상승 → 달러 강세 → crypto 약세"
    enrichment:
      scope: global
      columns: [close]
      rename_map:
        close: macro_uup_close

  - id: yf_hyg
    name: HYG (High Yield Bond ETF)
    data_type: macro
    source_id: yfinance
    batch_group: yfinance
    description: "iShares iBoxx High Yield Corporate Bond ETF — 하이일드 채권"
    resolution: 1d
    available_since: "2007-04-11"
    storage_path: "data/silver/macro/yfinance/hyg.parquet"
    columns: [close]
    fetch_key: hyg
    strategy_hints:
      - "HYG 하락 → 신용 스프레드 확대 → risk-off"
      - "HYG-TLT spread → 위험 선호도 지표"
    enrichment:
      scope: global
      columns: [close]
      rename_map:
        close: macro_hyg_close

  # ─── Options: Deribit ──────────────────────────────────────────
  - id: deribit_btc_dvol
    name: BTC DVOL (30-Day Implied Volatility)
    data_type: options
    source_id: deribit
    batch_group: deribit
    description: "Deribit BTC DVOL Index — crypto VIX 등가물"
    resolution: 1d
    available_since: "2021-03-01"
    storage_path: "data/silver/options/deribit/btc_dvol.parquet"
    columns: [open, high, low, close, volume]
    fetch_key: btc_dvol
    strategy_hints:
      - "DVOL z-score (60D lookback) → 고IV시 포지션 축소"
      - "DVOL > RV spread → contrarian 기회"
    enrichment:
      scope: global
      columns: [close]
      rename_map:
        close: opt_btc_dvol

  - id: deribit_eth_dvol
    name: ETH DVOL (30-Day Implied Volatility)
    data_type: options
    source_id: deribit
    batch_group: deribit
    description: "Deribit ETH DVOL Index — ETH 30일 내재변동성"
    resolution: 1d
    available_since: "2021-03-01"
    storage_path: "data/silver/options/deribit/eth_dvol.parquet"
    columns: [open, high, low, close, volume]
    fetch_key: eth_dvol
    strategy_hints:
      - "ETH DVOL vs BTC DVOL spread → 상대 변동성"
      - "ETH DVOL 급등 → ETH 특화 이벤트 경고"
    enrichment:
      scope: global
      columns: [close]
      rename_map:
        close: opt_eth_dvol

  - id: deribit_btc_pc_ratio
    name: BTC Put/Call OI Ratio
    data_type: options
    source_id: deribit
    batch_group: deribit
    description: "Deribit BTC 옵션 Put/Call 미결제약정 비율"
    resolution: 1d
    available_since: "2026-02-18"
    storage_path: "data/silver/options/deribit/btc_pc_ratio.parquet"
    columns: [put_oi, call_oi, pc_ratio]
    fetch_key: btc_pc_ratio
    strategy_hints:
      - "P/C ratio > 1 → 풋 과매수, 바닥 시그널"
      - "P/C ratio < 0.5 → 과도한 낙관, 조정 경고"
    enrichment:
      scope: global
      columns: [pc_ratio]
      rename_map:
        pc_ratio: opt_btc_pc_ratio

  - id: deribit_btc_hist_vol
    name: BTC Historical Volatility
    data_type: options
    source_id: deribit
    batch_group: deribit
    description: "Deribit BTC 실현변동성 (7/30/60/90/120/180/365D)"
    resolution: 1d
    available_since: "2021-01-01"
    storage_path: "data/silver/options/deribit/btc_hist_vol.parquet"
    columns: [vol_7d, vol_30d, vol_60d, vol_90d, vol_120d, vol_180d, vol_365d]
    fetch_key: btc_hist_vol
    strategy_hints:
      - "IV-RV spread (DVOL - RV30d) → vol premium"
      - "RV 하락 추세 → 변동성 수축, breakout 대비"
    enrichment:
      scope: global
      columns: [vol_30d]
      rename_map:
        vol_30d: opt_btc_rv30d

  - id: deribit_btc_term_structure
    name: BTC Futures Term Structure
    data_type: options
    source_id: deribit
    batch_group: deribit
    description: "Deribit BTC 선물 기간구조 (contango/backwardation)"
    resolution: 1d
    available_since: "2026-02-18"
    storage_path: "data/silver/options/deribit/btc_term_structure.parquet"
    columns: [near_basis_pct, far_basis_pct, slope]
    fetch_key: btc_term_structure
    strategy_hints:
      - "slope > 0 (contango) → 정상 시장, carry trade"
      - "slope < 0 (backwardation) → 공포/급락 구간"
    enrichment:
      scope: global
      columns: [slope]
      rename_map:
        slope: opt_btc_term_slope

  - id: deribit_btc_max_pain
    name: BTC Options Max Pain
    data_type: options
    source_id: deribit
    batch_group: deribit
    description: "Deribit BTC 옵션 Max Pain — 가장 많은 옵션이 무가치 만료되는 행사가"
    resolution: 1d
    available_since: "2026-02-18"
    storage_path: "data/silver/options/deribit/btc_max_pain.parquet"
    columns: [max_pain_strike, total_oi, expiry]
    fetch_key: btc_max_pain
    strategy_hints:
      - "Max Pain과 현재가 괴리 → 만기 수렴 트레이딩"
      - "total_oi 급증 → 옵션 시장 주도 변동성 확대 신호"
    enrichment:
      scope: global
      columns: [max_pain_strike]
      rename_map:
        max_pain_strike: opt_btc_max_pain

  # ─── Extended Derivatives (Coinalyze) ──────────────────────────────
  - id: coinalyze_btc_agg_oi
    name: BTC Aggregated Open Interest
    data_type: deriv_ext
    source_id: coinalyze
    batch_group: coinalyze
    description: "Coinalyze 멀티거래소 집계 BTC OI (OHLC, Binance primary)"
    resolution: 1d
    available_since: "2020-01-01"
    storage_path: "data/silver/deriv_ext/coinalyze/btc_agg_oi.parquet"
    columns: [open, high, low, close]
    fetch_key: btc_agg_oi
    strategy_hints:
      - "OI 급증 + 가격 횡보 → 포지션 축적, breakout 대비"
      - "OI 감소 + 가격 하락 → 청산 cascade, 추세 전환 신호"
    enrichment:
      scope: per_asset
      columns: [close]
      rename_map:
        close: dext_agg_oi_close

  - id: coinalyze_eth_agg_oi
    name: ETH Aggregated Open Interest
    data_type: deriv_ext
    source_id: coinalyze
    batch_group: coinalyze
    description: "Coinalyze 멀티거래소 집계 ETH OI (OHLC, Binance primary)"
    resolution: 1d
    available_since: "2020-01-01"
    storage_path: "data/silver/deriv_ext/coinalyze/eth_agg_oi.parquet"
    columns: [open, high, low, close]
    fetch_key: eth_agg_oi
    strategy_hints:
      - "ETH OI divergence (vs BTC) → 알트 로테이션 신호"
    enrichment:
      scope: per_asset
      columns: [close]
      rename_map:
        close: dext_agg_oi_close

  - id: coinalyze_btc_agg_funding
    name: BTC Aggregated Funding Rate
    data_type: deriv_ext
    source_id: coinalyze
    batch_group: coinalyze
    description: "Coinalyze 멀티거래소 집계 BTC 펀딩비 (OHLC)"
    resolution: 1d
    available_since: "2020-01-01"
    storage_path: "data/silver/deriv_ext/coinalyze/btc_agg_funding.parquet"
    columns: [open, high, low, close]
    fetch_key: btc_agg_funding
    strategy_hints:
      - "극단적 양수 펀딩 → 과매수, 숏 엔트리 고려"
      - "극단적 음수 펀딩 → 과매도, 롱 엔트리 고려"
      - "Cross-exchange funding dispersion → arbitrage 기회"
    enrichment:
      scope: per_asset
      columns: [close]
      rename_map:
        close: dext_agg_funding_close

  - id: coinalyze_eth_agg_funding
    name: ETH Aggregated Funding Rate
    data_type: deriv_ext
    source_id: coinalyze
    batch_group: coinalyze
    description: "Coinalyze 멀티거래소 집계 ETH 펀딩비 (OHLC)"
    resolution: 1d
    available_since: "2020-01-01"
    storage_path: "data/silver/deriv_ext/coinalyze/eth_agg_funding.parquet"
    columns: [open, high, low, close]
    fetch_key: eth_agg_funding
    strategy_hints:
      - "ETH-BTC funding spread → 상대가치 전략"
    enrichment:
      scope: per_asset
      columns: [close]
      rename_map:
        close: dext_agg_funding_close

  - id: coinalyze_btc_liquidations
    name: BTC Liquidations
    data_type: deriv_ext
    source_id: coinalyze
    batch_group: coinalyze
    description: "Coinalyze 멀티거래소 BTC 청산 (long/short volume, 1H→1D 롤업)"
    resolution: 1d
    available_since: "2020-01-01"
    storage_path: "data/silver/deriv_ext/coinalyze/btc_liquidations.parquet"
    columns: [long_volume, short_volume]
    fetch_key: btc_liquidations
    strategy_hints:
      - "롱 청산 급증 → 가격 바닥 형성 가능성"
      - "숏 청산 급증 → 숏 스퀴즈, 급등 신호"
      - "양방향 대규모 청산 → 극단적 변동성, 추세 전환"
    enrichment:
      scope: per_asset
      columns: [long_volume, short_volume]
      rename_map:
        long_volume: dext_liq_long_vol
        short_volume: dext_liq_short_vol

  - id: coinalyze_eth_liquidations
    name: ETH Liquidations
    data_type: deriv_ext
    source_id: coinalyze
    batch_group: coinalyze
    description: "Coinalyze 멀티거래소 ETH 청산 (long/short volume, 1H→1D 롤업)"
    resolution: 1d
    available_since: "2020-01-01"
    storage_path: "data/silver/deriv_ext/coinalyze/eth_liquidations.parquet"
    columns: [long_volume, short_volume]
    fetch_key: eth_liquidations
    strategy_hints:
      - "ETH 청산 vs BTC 청산 비율 → 알트 리스크 지표"
    enrichment:
      scope: per_asset
      columns: [long_volume, short_volume]
      rename_map:
        long_volume: dext_liq_long_vol
        short_volume: dext_liq_short_vol

  - id: coinalyze_btc_cvd
    name: BTC Cumulative Volume Delta
    data_type: deriv_ext
    source_id: coinalyze
    batch_group: coinalyze
    description: "Coinalyze 멀티거래소 BTC CVD (매수/매도 delta)"
    resolution: 1d
    available_since: "2020-01-01"
    storage_path: "data/silver/deriv_ext/coinalyze/btc_cvd.parquet"
    columns: [open, high, low, close, volume, buy_volume]
    fetch_key: btc_cvd
    strategy_hints:
      - "CVD 상승 + 가격 하락 → bullish divergence"
      - "CVD 하락 + 가격 상승 → bearish divergence"
      - "buy_volume / volume ratio → 매수 압력 지표"
    enrichment:
      scope: per_asset
      columns: [buy_volume]
      rename_map:
        buy_volume: dext_cvd_buy_vol

  - id: coinalyze_eth_cvd
    name: ETH Cumulative Volume Delta
    data_type: deriv_ext
    source_id: coinalyze
    batch_group: coinalyze
    description: "Coinalyze 멀티거래소 ETH CVD (매수/매도 delta)"
    resolution: 1d
    available_since: "2020-01-01"
    storage_path: "data/silver/deriv_ext/coinalyze/eth_cvd.parquet"
    columns: [open, high, low, close, volume, buy_volume]
    fetch_key: eth_cvd
    strategy_hints:
      - "ETH CVD-price divergence → ETH 독립 알파"
    enrichment:
      scope: per_asset
      columns: [buy_volume]
      rename_map:
        buy_volume: dext_cvd_buy_vol

  # ─── Macro: CoinGecko ──────────────────────────────────────────────
  - id: coingecko_global_metrics
    name: CoinGecko Global Metrics
    data_type: macro
    source_id: coingecko
    batch_group: coingecko
    description: "CoinGecko /global 스냅샷 — BTC/ETH dominance, total market cap/volume"
    resolution: snapshot
    available_since: "2026-02-18"
    storage_path: "data/silver/macro/coingecko/global_metrics.parquet"
    columns: [btc_dominance, eth_dominance, total_market_cap_usd, total_volume_usd, active_cryptocurrencies]
    fetch_key: global_metrics
    strategy_hints:
      - "BTC dominance 상승 → 알트 약세, BTC 선호"
      - "Total market cap 급증 → 전체 시장 강세"
      - "BTC dominance 하락 + total mcap 상승 → 알트 시즌"
    enrichment:
      scope: global
      columns: [btc_dominance, total_market_cap_usd]
      rename_map:
        btc_dominance: macro_btc_dom
        total_market_cap_usd: macro_total_mcap

  - id: coingecko_defi_global
    name: CoinGecko DeFi Global
    data_type: macro
    source_id: coingecko
    batch_group: coingecko
    description: "CoinGecko DeFi 글로벌 스냅샷 — DeFi market cap, dominance, ETH ratio"
    resolution: snapshot
    available_since: "2026-02-18"
    storage_path: "data/silver/macro/coingecko/defi_global.parquet"
    columns: [defi_market_cap, defi_to_eth_ratio, defi_dominance]
    fetch_key: defi_global
    strategy_hints:
      - "DeFi dominance 상승 → DeFi 생태계 성장"
      - "DeFi/ETH ratio → DeFi 활동 대비 ETH 가치 평가"
    enrichment:
      scope: global
      columns: [defi_dominance]
      rename_map:
        defi_dominance: macro_defi_dom

  # ─── Extended Derivatives (Hyperliquid) ───────────────────────────
  - id: hl_asset_contexts
    name: Hyperliquid Asset Contexts
    data_type: deriv_ext
    source_id: hyperliquid
    batch_group: hyperliquid
    description: "Hyperliquid per-asset OI/Funding/Volume 스냅샷 (BTC, ETH)"
    resolution: snapshot
    available_since: "2026-02-18"
    storage_path: "data/silver/deriv_ext/hyperliquid/hl_asset_contexts.parquet"
    columns: [coin, mark_price, open_interest, funding, premium, day_ntl_vlm]
    fetch_key: hl_asset_contexts
    strategy_hints:
      - "Hyperliquid OI vs Binance OI → cross-venue divergence"
      - "Hyperliquid funding vs Binance funding → CEX/DEX 괴리"
      - "day_ntl_vlm 급증 → 시장 활성도 상승"
    enrichment:
      scope: per_asset
      columns: [open_interest, funding]
      rename_map:
        open_interest: dext_hl_oi
        funding: dext_hl_funding

  - id: hl_predicted_fundings
    name: Hyperliquid Predicted Fundings
    data_type: deriv_ext
    source_id: hyperliquid
    batch_group: hyperliquid
    description: "Hyperliquid cross-venue 예상 펀딩 비교 (Binance, Bybit 등)"
    resolution: snapshot
    available_since: "2026-02-18"
    storage_path: "data/silver/deriv_ext/hyperliquid/hl_predicted_fundings.parquet"
    columns: [coin, venue, predicted_funding]
    fetch_key: hl_predicted_fundings
    strategy_hints:
      - "거래소 간 predicted funding 괴리 → funding arbitrage 기회"
      - "전 거래소 funding 일제 양수 → 과매수 경고"
