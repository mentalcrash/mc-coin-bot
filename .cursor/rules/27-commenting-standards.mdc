---
description: Commenting & Docstring Standards (Self-Documenting Code)
globs: **/*.py
alwaysApply: false
---

# ğŸ“ Commenting & Documentation Standards (2026)

## 1. Core Philosophy: Self-Documenting Code
- **The "Why", Not "What":** ì½”ë“œê°€ 'ë¬´ì—‡'ì„ í•˜ëŠ”ì§€ëŠ” ë³€ìˆ˜ëª…ê³¼ í•¨ìˆ˜ëª…ìœ¼ë¡œ ì„¤ëª…í•˜ì‹­ì‹œì˜¤. ì£¼ì„ì€ ì˜¤ì§ **'ì™œ'** ê·¸ë ‡ê²Œ ì§°ëŠ”ì§€(ì˜ë„, ì œì•½ì‚¬í•­, ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§)ë¥¼ ì„¤ëª…í•  ë•Œë§Œ ì‚¬ìš©í•©ë‹ˆë‹¤.
- **No Redundant Comments:** ì½”ë“œ ì½ìœ¼ë©´ ë°”ë¡œ ì•Œ ìˆ˜ ìˆëŠ” ë‚´ìš©ì„ í•œêµ­ì–´ë¡œ ë²ˆì—­í•´ë†“ì€ ì£¼ì„ì€ ì¦‰ì‹œ ì‚­ì œí•©ë‹ˆë‹¤.
    - âŒ `# ê°€ê²©ì„ 10% ì˜¬ë¦°ë‹¤` -> `price = price * 1.1`
    - âœ… `adjusted_price = price * 1.1` (ë³€ìˆ˜ëª…ìœ¼ë¡œ ì„¤ëª…)

## 2. Docstrings (Public Interface)
- **Google Style:** ëª¨ë“  Public ëª¨ë“ˆ, í´ë˜ìŠ¤, í•¨ìˆ˜ì—ëŠ” **Google Style Docstring**ì„ ì‘ì„±í•©ë‹ˆë‹¤.
- **Type Hint Integration:** íƒ€ì… íŒíŠ¸(`Rule #16`)ê°€ ì´ë¯¸ ì¡´ì¬í•˜ë¯€ë¡œ, Docstringì˜ `Args:` ì„¹ì…˜ì— íƒ€ì…ì„ ì¤‘ë³µí•´ì„œ ì ì§€ ì•ŠìŠµë‹ˆë‹¤.
    - âŒ `price (Decimal): ì£¼ë¬¸ ê°€ê²©`
    - âœ… `price: ì£¼ë¬¸ ê°€ê²©` (íƒ€ì…ì€ ì‹œê·¸ë‹ˆì²˜ê°€ ì„¤ëª…í•¨)
- **Missing Docstrings:** `private` ë©”ì„œë“œ(`_method`)ë‚˜ ë‚´ë¶€ ë¡œì§ì€ ì½”ë“œê°€ ëª…í™•í•˜ë‹¤ë©´ Docstringì„ ìƒëµí•´ë„ ë©ë‹ˆë‹¤.

## 3. Inline Comments (The Exception)
- **Complexity:** ë³µì¡í•œ ìˆ˜í•™ ê³µì‹(ì§€í‘œ ê³„ì‚°)ì´ë‚˜ ì •ê·œì‹ì—ëŠ” ë°˜ë“œì‹œ **ê³µì‹ì˜ ì¶œì²˜(URL)**ë‚˜ **ì˜ë„**ë¥¼ ì ìŠµë‹ˆë‹¤.
- **Workarounds:** ë¼ì´ë¸ŒëŸ¬ë¦¬ ë²„ê·¸ë‚˜ API íŠ¹ì´ì‚¬í•­ìœ¼ë¡œ ì¸í•´ ë¹„ì§ê´€ì ì¸ ì½”ë“œë¥¼ ì§°ì„ ê²½ìš°, ë°˜ë“œì‹œ ì´ìœ ë¥¼ ëª…ì‹œí•©ë‹ˆë‹¤.
    - ì˜ˆ: `# CCXT ë°”ì´ë‚¸ìŠ¤ ëª¨ë“ˆ ë²„ê·¸ë¡œ ì¸í•´ ê°•ì œ í˜•ë³€í™˜ í•„ìš” (Issue #1521)`

## 4. Annotation Tags
- **Standard Tags:** ì½”ë“œ ë‚´ì—ì„œ ì‘ì—… ìƒíƒœë¥¼ í‘œì‹œí•  ë•ŒëŠ” ì•„ë˜ íƒœê·¸ë¥¼ ëŒ€ë¬¸ìë¡œ ì‚¬ìš©í•©ë‹ˆë‹¤.
    - `TODO`: í–¥í›„ êµ¬í˜„í•´ì•¼ í•  ê¸°ëŠ¥
    - `FIXME`: ì•Œê³  ìˆëŠ” ë²„ê·¸ë‚˜ ìˆ˜ì •ì´ í•„ìš”í•œ ë¡œì§
    - `OPTIMIZE`: ì‘ë™ì€ í•˜ì§€ë§Œ ì„±ëŠ¥ ê°œì„ ì´ í•„ìš”í•œ ê³³
    - `NOTE`: ê°œë°œìê°€ ì£¼ì˜í•´ì•¼ í•  íŠ¹ì´ì‚¬í•­
    - `HACK`: ì„ì‹œë°©í¸ìœ¼ë¡œ ì²˜ë¦¬í•œ ì½”ë“œ (ë¦¬íŒ©í† ë§ ëŒ€ìƒ)

## 5. Example Pattern

### âœ… Good (Self-Documenting & Intent-Focused)
```python
from decimal import Decimal

def calculate_position_size(balance: Decimal, risk_ratio: Decimal) -> Decimal:
    """
    ê³„ì¢Œ ì”ê³ ì™€ ë¦¬ìŠ¤í¬ ë¹„ìœ¨ì„ ê¸°ë°˜ìœ¼ë¡œ ì§„ì… ìˆ˜ëŸ‰ì„ ê³„ì‚°í•©ë‹ˆë‹¤.

    Args:
        balance: í˜„ì¬ ì‚¬ìš© ê°€ëŠ¥í•œ í˜„ê¸ˆ ì”ê³ 
        risk_ratio: 1íšŒ ê±°ë˜ë‹¹ ê°ìˆ˜í•  ì†ì‹¤ ë¹„ìœ¨ (0.0 ~ 1.0)

    Returns:
        ì§„ì… ê°€ëŠ¥í•œ ìµœëŒ€ ìˆ˜ëŸ‰ (ìˆ˜ìˆ˜ë£Œ ì œì™¸)
    """
    if risk_ratio > 0.5:
        # NOTE: 50% ì´ìƒì˜ ë¦¬ìŠ¤í¬ëŠ” íŒŒì‚° ìœ„í—˜ì´ ë†’ì•„ ê°•ì œë¡œ ì œí•œí•¨ (Rule #20)
        risk_ratio = Decimal("0.5")

    # HACK: ë°”ì´ë‚¸ìŠ¤ ìµœì†Œ ì£¼ë¬¸ ìˆ˜ëŸ‰ ë³´ì •ì„ ìœ„í•´ 0.99 ê³±í•¨
    safe_balance = balance * risk_ratio * Decimal("0.99")
    
    return safe_balance

```

### âŒ Bad (Redundant & Noisy)

```python
def calc(b, r):
    # ì”ê³ ê°€ b, ë¦¬ìŠ¤í¬ê°€ rì´ë‹¤.
    # ë¦¬ìŠ¤í¬ê°€ 0.5ë³´ë‹¤ í¬ë©´
    if r > 0.5:
        r = 0.5 # rì„ 0.5ë¡œ ì„¤ì •
    
    # ê²°ê³¼ë¥¼ ê³„ì‚°í•œë‹¤
    res = b * r 
    return res

```