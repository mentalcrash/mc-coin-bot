description: Ruff Linter & Formatter Compliance Standards (Strict Mode)
globs: **/*.py
alwaysApply: false
---

# üßπ Ruff Compliance & Code Quality Standards

## 1. Core Protocol (Pre-Linting)
- **Mindset:** ÏΩîÎìúÎ•º ÏÉùÏÑ±Ìï† Îïå, ÎãπÏã†Ïùò Î®∏Î¶øÏÜçÏóêÏÑú Ïã§ÏãúÍ∞ÑÏúºÎ°ú `ruff check --fix`ÏôÄ `ruff format`Ïù¥ Ïã§ÌñâÎêòÍ≥† ÏûàÎã§Í≥† Í∞ÄÏ†ïÌïòÏã≠ÏãúÏò§.
- **Goal:** ÏÇ¨Ïö©ÏûêÍ∞Ä ÏΩîÎìúÎ•º Î∂ôÏó¨ÎÑ£ÏóàÏùÑ Îïå, Ï∂îÍ∞ÄÏ†ÅÏù∏ Î¶∞ÌåÖ ÏóêÎü¨Í∞Ä '0'Ïù¥Ïñ¥Ïïº Ìï©ÎãàÎã§.
- **Reference:** ÌîÑÎ°úÏ†ùÌä∏ Î£®Ìä∏Ïùò `pyproject.toml` ÎÇ¥ `[tool.ruff]` ÏÑπÏÖòÏùÑ Í∏∞Ï§ÄÏúºÎ°ú Ìï©ÎãàÎã§.

## 2. Specific Rule Enforcements

### üêº Pandas Hygiene (Ruleset: PD)
- **Immutable Operations (Strict):** `inplace=True` ÏÇ¨Ïö©ÏùÄ ÏóÑÍ≤©Ìûà Í∏àÏßÄÎê©ÎãàÎã§. (Rule `PD002`)
    - Pandas 3.0+ Ìä∏Î†åÎìúÏóê ÎßûÏ∂∞ Î∂àÎ≥ÄÏÑ±ÏùÑ Ïú†ÏßÄÌïòÏã≠ÏãúÏò§.
    - ‚ùå `df.fillna(0, inplace=True)`
    - ‚úÖ `df = df.fillna(0)`
- **No Iteration:** `iterrows`, `itertuples`Îäî Ï†àÎåÄ ÏÇ¨Ïö©ÌïòÏßÄ ÏïäÏäµÎãàÎã§. (Vectorization Rule Ï∞∏Ï°∞)

### üõ°Ô∏è Error Handling (Ruleset: TRY, B)
- **No Bare Except:** `except:` ÎòêÎäî `except Exception:`Í≥º Í∞ôÏùÄ Ìè¨Í¥ÑÏ†Å ÏòàÏô∏ Ï≤òÎ¶¨Îäî Í∏àÏßÄÎê©ÎãàÎã§. Î∞òÎìúÏãú Íµ¨Ï≤¥Ï†ÅÏù∏ ÏòàÏô∏Î•º Î™ÖÏãúÌïòÏã≠ÏãúÏò§. (`TRY002`)
- **Verbose Exceptions:** `raise ValueError` ÎÇ¥Î∂ÄÏóê Í∏¥ ÏÑ§Î™Ö Î¨∏ÏûêÏó¥ÏùÑ ÎÑ£ÏßÄ ÎßêÍ≥†, ÏÉÅÌô©Ïù¥ Î≥µÏû°ÌïòÎã§Î©¥ Ïª§Ïä§ÌÖÄ ÏòàÏô∏ ÌÅ¥ÎûòÏä§Î•º ÏÇ¨Ïö©ÌïòÏã≠ÏãúÏò§. (`TRY003`)

### ‚ö° Async Safety (Ruleset: ASYNC)
- **No Blocking I/O:** `async def` Ìï®Ïàò ÎÇ¥Î∂ÄÏóêÏÑú `time.sleep()`, `requests.get()` Îì± ÎèôÍ∏∞ Ìï®Ïàò Ìò∏Ï∂úÏùÄ Ï†àÎåÄ Í∏àÏßÄÏûÖÎãàÎã§. (`ASYNC101`, `ASYNC102`)
    - Î∞òÎìúÏãú `await asyncio.sleep()`, `await client.get()`ÏùÑ ÏÇ¨Ïö©ÌïòÏã≠ÏãúÏò§.

### üßπ Imports & Sorting (Ruleset: I, F)
- **Sectioning:** ImportÎäî `Standard Lib` -> `Third Party` -> `First Party (src)` ÏàúÏÑúÎ°ú Í∑∏Î£πÌôîÌïòÏó¨ Ï†ïÎ†¨ÌïòÏã≠ÏãúÏò§.
- **Cleanliness:** ÏÇ¨Ïö©ÌïòÏßÄ ÏïäÎäî Import(`F401`)ÎÇò Î≥ÄÏàò(`F841`)Îäî ÏÉùÏÑ± ÏΩîÎìúÏóê Ìè¨Ìï®ÌïòÏßÄ ÎßàÏã≠ÏãúÏò§.

### üìú Naming & Style (Ruleset: N, PL, ISC)
- **Snake Case:** Î≥ÄÏàòÏôÄ Ìï®ÏàòÎ™ÖÏùÄ `snake_case`Î•º Îî∞Î•¥Ïã≠ÏãúÏò§. (`N802`, `N806`)
- **Double Quotes:** Î™®Îì† Î¨∏ÏûêÏó¥ÏùÄ Double Quotes (`"`)Î•º ÏÇ¨Ïö©ÌïòÏã≠ÏãúÏò§. (Ruff Format Í∏∞Î≥∏Í∞í)
- **No Implicit String Concatenation:** Ïó¨Îü¨ Ï§ÑÏóê Í±∏Ïπú Î¨∏ÏûêÏó¥ ÏÉùÏÑ± Ïãú ÏïîÏãúÏ†Å Ïó∞Í≤∞(Implicit Concatenation)ÏùÑ ÏÇ¨Ïö©ÌïòÏßÄ ÎßàÏã≠ÏãúÏò§. (`ISC001`)
    - ‚ùå `text = "First line " "Second line"`
    - ‚úÖ `text = "First line " + "Second line"` ÎòêÎäî ÌïòÎÇòÏùò f-string/Ïó∞ÏÜçÎêú Î¨∏ÏûêÏó¥Î°ú ÏûëÏÑ±ÌïòÏã≠ÏãúÏò§.
- **Type Casting:** `len() > 0` ÎåÄÏã† `if seq:`Î•º ÏÇ¨Ïö©ÌïòÎäî Îì± PythonicÌïú Í∞ÑÏÜåÌôî Í∑úÏπô(`SIM`)ÏùÑ Ï†ÅÏö©ÌïòÏã≠ÏãúÏò§.

## 3. Security (Ruleset: S)
- **No Hardcoded Secrets:** API Key, Password Îì± ÎØºÍ∞ê Ï†ïÎ≥¥Îäî ÏΩîÎìú ÎÇ¥ Î¨∏ÏûêÏó¥Î°ú Ï†àÎåÄ Ìè¨Ìï®ÌïòÏßÄ ÎßàÏã≠ÏãúÏò§. (`S101`)
- **No Shell Injection:** `subprocess` ÏÇ¨Ïö© Ïãú `shell=True`Îäî Í∏àÏßÄÎê©ÎãàÎã§. (`S602`)

## 4. Example Pattern

### ‚úÖ Compliant Code (Clean & Safe)
```python
import asyncio
from decimal import Decimal

from loguru import logger  # Third Party
from pydantic import ValidationError

from src.models import Order  # First Party

async def process_order(order_id: str) -> None:
    try:
        # ASYNC safe sleep
        await asyncio.sleep(0.1)
        
        # Double quotes & Snake case
        logger.info(f"Processing order: {order_id}")
        
    except ValidationError as e:
        # Specific exception handling
        logger.error(f"Validation failed: {e}")
        raise  # Re-raise nicely

```

### ‚ùå Non-Compliant Code (Ruff Errors)

```python
import time # ASYNC101 violation potential
from src.models import Order # Import order wrong (should be last)

def process(id): # Missing type hints
    try:
        time.sleep(1) # Blocking call in potentially async context
        print('done') # T201 (print used instead of logger)
    except: # TRY002 (Bare except)
        pass

```