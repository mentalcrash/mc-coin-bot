---
description: Data Visualization & Reporting Standards (QuantStats)
globs: **/backtest/*.py, **/analysis/*.py, **/notebooks/*.ipynb
alwaysApply: false
---

# ğŸ“Š Data Visualization Standards (2026)

## 1. Primary Visualization: QuantStats
- **All-in-One Solution:** ë°±í…ŒìŠ¤íŠ¸ ì„±ê³¼ ë¶„ì„ ë° ì‹œê°í™”ëŠ” **QuantStats**ë¥¼ í‘œì¤€ìœ¼ë¡œ ì‚¬ìš©í•©ë‹ˆë‹¤.
- **Built-in Charts:** ìì‚° ê³¡ì„ , ë‚™í­, ì›”ë³„ íˆíŠ¸ë§µ, ìˆ˜ìµë¥  ë¶„í¬ ë“± 20+ ì°¨íŠ¸ê°€ ë‚´ì¥ë˜ì–´ ìˆìŠµë‹ˆë‹¤.
- **No Custom Charts Needed:** ë³„ë„ì˜ `src/viz/` ëª¨ë“ˆ ì—†ì´ QuantStats í•˜ë‚˜ë¡œ ì¶©ë¶„í•©ë‹ˆë‹¤.

## 2. QuantStats Core Functions

### ë¦¬í¬íŠ¸ ìƒì„±
```python
import quantstats as qs

# HTML ì¢…í•© ë¦¬í¬íŠ¸ (í•œ ì¤„ë¡œ 20+ ì°¨íŠ¸ ìƒì„±)
qs.reports.html(returns, benchmark=btc_returns, output="report.html")

# Jupyter í‹°ì–´ì‹œíŠ¸
qs.reports.full(returns, benchmark=btc_returns)

# í•µì‹¬ ì§€í‘œë§Œ
qs.reports.metrics(returns, benchmark=btc_returns, display=True)
```

### ê°œë³„ ì°¨íŠ¸
```python
# ìì‚° ê³¡ì„ 
qs.plots.returns(returns, benchmark=btc_returns, cumulative=True)

# ë‚™í­ ì°¨íŠ¸
qs.plots.drawdown(returns)

# ì›”ë³„ ìˆ˜ìµë¥  íˆíŠ¸ë§µ
qs.plots.monthly_heatmap(returns)

# ìˆ˜ìµë¥  ë¶„í¬
qs.plots.histogram(returns)
```

## 3. Crypto-Specific Settings (Required)
```python
# ì•”í˜¸í™”íëŠ” 365ì¼ 24ì‹œê°„ ê±°ë˜
qs.reports.html(
    returns,
    benchmark=btc_returns,
    periods_per_year=365,  # ì£¼ì‹ ê¸°ë³¸ê°’ 252 ëŒ€ì‹  365
    rf=0.05,               # ìŠ¤í…Œì´ë¸”ì½”ì¸ ì˜ˆì¹˜ ìˆ˜ìµë¥  5%
)
```

## 4. Dashboarding: Streamlit (Optional)
- **ì‹¤ì‹œê°„ ëª¨ë‹ˆí„°ë§ìš©:** íŠ¸ë ˆì´ë”© ë´‡ ê´€ì œ ì‹œìŠ¤í…œì€ **Streamlit**ìœ¼ë¡œ êµ¬ì¶•í•©ë‹ˆë‹¤.
- **QuantStats ì—°ë™:** QuantStats HTML ë¦¬í¬íŠ¸ë¥¼ iframeìœ¼ë¡œ ì„ë² ë”©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

```python
import streamlit as st
import streamlit.components.v1 as components

# QuantStats HTML ë¦¬í¬íŠ¸ ì„ë² ë”©
with open("report.html", "r") as f:
    html_content = f.read()
components.html(html_content, height=800, scrolling=True)
```

## 5. Color Scheme (Reference)
- **Up/Buy:** Green (`#26a69a` / `#00C853`)
- **Down/Sell:** Red (`#ef5350` / `#D50000`)
- **Text:** White/Light Grey (`#E0E0E0`)

## 6. Example Pattern

### âœ… Good (QuantStats)
```python
import quantstats as qs

def analyze_strategy(returns, benchmark_returns):
    """QuantStatsë¡œ ì „ëµ ì„±ê³¼ ë¶„ì„."""
    qs.extend_pandas()
    
    # 1. ì½˜ì†”ì— í•µì‹¬ ì§€í‘œ ì¶œë ¥
    qs.reports.metrics(returns, benchmark=benchmark_returns, display=True)
    
    # 2. ì¸í„°ë™í‹°ë¸Œ ì°¨íŠ¸ (Jupyter)
    qs.plots.returns(returns, benchmark=benchmark_returns, cumulative=True)
    qs.plots.drawdown(returns)
    qs.plots.monthly_heatmap(returns)
    
    # 3. HTML ë¦¬í¬íŠ¸ ì €ì¥
    qs.reports.html(
        returns,
        benchmark=benchmark_returns,
        output="reports/strategy_report.html",
        periods_per_year=365,
        rf=0.05,
    )
```

### âŒ Bad (Custom Plotly Implementation)
```python
import plotly.graph_objects as go

def bad_custom_chart(returns):
    # QuantStatsê°€ ì´ë¯¸ ì œê³µí•˜ëŠ” ê¸°ëŠ¥ì„ ì§ì ‘ êµ¬í˜„
    # ìœ ì§€ë³´ìˆ˜ ë¶€ë‹´ ì¦ê°€, ë²„ê·¸ ê°€ëŠ¥ì„±
    fig = go.Figure()
    fig.add_trace(go.Scatter(x=returns.index, y=returns.cumsum()))
    fig.show()
```
