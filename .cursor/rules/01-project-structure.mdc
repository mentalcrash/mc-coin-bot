---
description: Project Directory Structure & Module Responsibilities (Src Layout)
globs: *
alwaysApply: true
---

# ğŸ—ï¸ Project Structure & Module Responsibilities

## 1. Root Layout Standard (`src` Pattern)
- **Source Root:** ëª¨ë“  ì†ŒìŠ¤ ì½”ë“œëŠ” ë°˜ë“œì‹œ `src/` ë””ë ‰í† ë¦¬ í•˜ìœ„ì— ìœ„ì¹˜í•´ì•¼ í•©ë‹ˆë‹¤.
- **Top-level:** ë£¨íŠ¸(`/`)ì—ëŠ” `pyproject.toml`, `README.md`, `.env`, `AGENTS.md` ë“± ì„¤ì • ë° ë¬¸ì„œ íŒŒì¼ë§Œ ìœ„ì¹˜í•©ë‹ˆë‹¤.

## 2. Directory Map & Rules Mapping
AIëŠ” ì½”ë“œë¥¼ ìƒì„±í•˜ê±°ë‚˜ ìˆ˜ì •í•  ë•Œ, ì•„ë˜ì˜ ë””ë ‰í† ë¦¬ë³„ ì±…ì„ê³¼ ì ìš©ë˜ëŠ” ë£°(Rules)ì„ ì¤€ìˆ˜í•´ì•¼ í•©ë‹ˆë‹¤.

### ğŸ”¹ Core & Configuration
- **Path:** `src/core/`, `src/config/`
- **Responsibility:** ë¡œê¹… ì„¤ì •, ìƒìˆ˜ ì •ì˜, í™˜ê²½ ë³€ìˆ˜ ë° Pydantic Settings ê´€ë¦¬.
- **Applied Rules:** `11-pydantic-modeling.mdc` (Settings), `15-logging-standards.mdc`

### ğŸ”¹ Data Layer (ETL & Analysis)
- **Path:** `src/data/`, `src/analysis/`
- **Responsibility:** ë°ì´í„° ìˆ˜ì§‘, ì €ì¥(Parquet), ë¡œë”©(DuckDB), í†µê³„ ë¶„ì„.
- **Applied Rules:** `12-data-engineering.mdc` (Vectorization), `21-data-visualization.mdc`
- **Structure:**
    - `loader/`: ì™¸ë¶€ ì†ŒìŠ¤ì—ì„œ ë°ì´í„° fetch (API í˜¸ì¶œ ì œì™¸, ìˆœìˆ˜ ë°ì´í„° ì²˜ë¦¬)
    - `storage/`: DuckDB/Parquet ê´€ë¦¬

### ğŸ”¹ Exchange Layer (Connectivity)
- **Path:** `src/exchange/`, `src/connector/`, `src/adapters/`
- **Responsibility:** CCXT Pro ì—°ê²°, WebSocket ê´€ë¦¬, ì •ë°€ë„ ë³´ì • ë° ê±°ë˜ì†Œ ì–´ëŒ‘í„°.
- **Applied Rules:** `14-ccxt-trading.mdc` (Async, Precision, WebSocket)
- **Constraint:** ì´ê³³ì—ëŠ” ë§¤ë§¤ ì „ëµ(Strategy) ë¡œì§ì´ í¬í•¨ë˜ì–´ì„œëŠ” ì•ˆ ë©ë‹ˆë‹¤. ì˜¤ì§ "ì—°ê²°"ê³¼ "ì£¼ë¬¸ ì „ì†¡"ë§Œ ë‹´ë‹¹í•©ë‹ˆë‹¤.

### ğŸ”¹ Domain Models (DTO & Schemas)
- **Path:** `src/models/`, `src/schemas/`, `src/dtos/`
- **Responsibility:** ë°ì´í„° êµ¬ì¡° ì •ì˜, ìœ íš¨ì„± ê²€ì‚¬, API ìŠ¤í‚¤ë§ˆ.
- **Applied Rules:** `11-pydantic-modeling.mdc` (Strict Typing, Frozen)

### ğŸ”¹ Strategy Layer (Brain)
- **Path:** `src/strategy/`
- **Responsibility:** ì‹œê·¸ë„ ìƒì„±, ì§€í‘œ ê³„ì‚°(Pandas-TA), ë§¤ë§¤ íŒë‹¨ ë¡œì§.
- **Applied Rules:** `12-data-engineering.mdc` (Vectorized Indicators)

### ğŸ”¹ Execution Layer (Action)
- **Path:** `src/execution/`
- **Responsibility:** ì£¼ë¬¸ ì§‘í–‰, ë¦¬ìŠ¤í¬ ê´€ë¦¬(Kill Switch), í¬ì§€ì…˜ ì¶”ì .
- **Applied Rules:** `23-exception-handling.mdc` (Stopping on critical errors)

### ğŸ”¹ Backtesting & Research
- **Path:** `src/backtest/` (ë˜ëŠ” `research/`)
- **Responsibility:** VectorBT ì‹œë®¬ë ˆì´ì…˜, ì „ëµ ìµœì í™” ë° ê²°ê³¼ ì‹œê°í™”.
- **Applied Rules:** `12-data-engineering.mdc` (VBT Broadcasting), `21-data-visualization.mdc`

### ğŸ”¹ Interface & CLI
- **Path:** `src/cli/`, `src/scripts/`, `src/main.py`
- **Responsibility:** Typer ê¸°ë°˜ CLI êµ¬í˜„, ìë™í™” ìŠ¤í¬ë¦½íŠ¸, ì‹œìŠ¤í…œ ì—”íŠ¸ë¦¬í¬ì¸íŠ¸.
- **Applied Rules:** `18-typer-cli.mdc` (Rich UI, Async CLI)

### ğŸ”¹ Visualization & Dashboard
- **Path:** `src/viz/`, `src/dashboard/`
- **Responsibility:** ë¶„ì„ ì‹œê°í™”(Plotly), Streamlit ê´€ì œ ëŒ€ì‹œë³´ë“œ.
- **Applied Rules:** `21-data-visualization.mdc`

### ğŸ”¹ Notification & Alerts
- **Path:** `src/notification/`, `src/alerts/`, `src/reporter/`
- **Responsibility:** Discord Webhook ì•Œë¦¼, ì—ëŸ¬ ë³´ê³ , ì¼ì¼ ë¦¬í¬íŠ¸ ì „ì†¡.
- **Applied Rules:** `22-notification-standards.mdc`

## 3. Cross-cutting Concerns (Global Rules)
ëª¨ë“  ë””ë ‰í† ë¦¬ì˜ `.py` íŒŒì¼ì— ê³µí†µì ìœ¼ë¡œ ì ìš©ë˜ëŠ” ê·œì¹™ì…ë‹ˆë‹¤.
- **Code Quality:** `10-python-standards.mdc`, `13-ruff-compliance.mdc`, `16-pyright-typing.mdc`
- **Stability:** `15-logging-standards.mdc`, `23-exception-handling.mdc`
- **Security:** `19-git-security.mdc`
- **Testing:** `17-testing-standards.mdc` (ëª¨ë“  `tests/` ë° `test_*.py`)

## 4. Dependency Flow (Unidirectional)
ìˆœí™˜ ì°¸ì¡°(Circular Dependency)ë¥¼ ë°©ì§€í•˜ê¸° ìœ„í•´ ì•„ë˜ì˜ ì˜ì¡´ì„± ë°©í–¥ì„ ì—„ê²©íˆ ì§€í‚µë‹ˆë‹¤.
- âœ… `Strategy` -> imports -> `Data`, `Models`
- âœ… `Execution` -> imports -> `Exchange`, `Models`, `Notification`
- âœ… `Main/CLI` -> imports -> `Strategy`, `Execution`, `Viz`
- âŒ `Models` -> imports -> `Strategy` (Forbidden)
- âŒ `Data` -> imports -> `Execution` (Forbidden)

## 5. File Naming Convention
- **Modules:** `snake_case.py` (ì˜ˆ: `market_data.py`, `risk_manager.py`)
- **Classes:** `PascalCase` (ì˜ˆ: `MarketDataManager`, `RiskController`)
- **Tests:** `tests/` í´ë” ë‚´ì— `src` êµ¬ì¡°ì™€ ë™ì¼í•˜ê²Œ ë¯¸ëŸ¬ë§í•˜ë©°, íŒŒì¼ëª… ì ‘ë‘ì‚¬ëŠ” `test_`ë¡œ ì‹œì‘í•©ë‹ˆë‹¤.