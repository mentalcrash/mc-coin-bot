# Strategy Evaluation Log

이 문서는 테스트한 전략들의 평가와 교훈을 기록합니다.
같은 실수를 반복하지 않고 더 나은 전략을 개발하기 위한 지식 베이스입니다.

---

## VW-TSMOM (Volume-Weighted Time Series Momentum)

**평가 일자:** 2026-02-06
**상태:** ✅ 채택 (제한적 용도)
**테스트 기간:** 2023-01-01 ~ 2025-12-31 (3년)

### 개요

학술 연구(SSRN #4825389)에 기반한 거래량 가중 시계열 모멘텀 전략.
변동성 타겟팅을 통해 포지션 크기를 조절하는 리스크 조정 접근법.

### 최종 설정

```python
TSMOMConfig(
    lookback=30,
    vol_window=30,
    vol_target=0.30,          # 0.25 → 0.30 (Sharpe 1.0 유지하며 수익 +20%)
    hedge_threshold=-0.07,    # -7% 드로다운 시 헤지 숏 활성화
    hedge_strength_ratio=0.8, # 롱 대비 80% 강도의 헤지
    short_mode=ShortMode.HEDGE_ONLY,
)
```

### 성과 요약

| 설정 | Return | Sharpe | MDD | Win Rate |
|------|--------|--------|-----|----------|
| 최종 설정 (vol=0.30) | +114.67% | 1.01 | 27.16% | ~54% |
| 보수적 (vol=0.25) | +95.70% | 1.03 | 23.14% | ~54% |
| B&H (벤치마크) | +427.47% | - | ~70% | - |

### 시도한 것들

#### 1. ADX 횡보장 필터 ❌
- **가설:** ADX < 25일 때 포지션 축소하면 횡보장 손실 감소
- **결과:** MDD 개선 (36.5% → 23.2%) but Sharpe 유지/소폭 하락
- **결론:** 복잡성 대비 이익 미미, 기본값 OFF 유지

```python
# 테스트 설정
use_sideways_filter=True, adx_threshold=35, sideways_position_scale=0.5
```

#### 2. 다중 타임프레임(MTF) 필터 ❌
- **가설:** 주간 추세 방향과 일치할 때만 진입하면 승률 향상
- **결과:** 역추세 진입 감소했으나, 강세장에서 유효 시그널도 필터링
- **결론:** 횡보장/약세장에서 유용할 수 있으나, 현재 불필요

| MTF 모드 | Sharpe | MDD | 평가 |
|----------|--------|-----|------|
| OFF | 1.05 | 23.14% | ✅ 베스트 |
| CONSENSUS | 1.01 | 21.85% | 과도한 필터링 |
| VETO | 0.96 | 21.85% | 성과 저하 |
| WEIGHTED | 0.96 | 24.93% | 성과 저하 |

#### 3. 레버리지 조절 (vol_target) ✅
- **발견:** max_leverage보다 vol_target이 실제 레버리지 결정
- **최적점:** vol_target=0.30 (Sharpe ≥1.0 유지, 수익 +20%)

| vol_target | Return | Sharpe | MDD |
|------------|--------|--------|-----|
| 0.25 | +95.70% | 1.03 | 23.14% |
| **0.30** | **+114.67%** | **1.01** | **27.16%** |
| 0.35 | +123.10% | 0.96 | 31.50% |
| 0.40 | +126.30% | 0.91 | 35.51% |

#### 4. 헤지 숏 모드 ✅
- **목적:** 드로다운 시 헤지 포지션으로 손실 제한
- **최적 설정:** threshold=-0.07, strength=0.8
- **효과:** Long-Only 대비 MDD 개선

### 전략의 강점

1. **안정적인 Sharpe Ratio (≥1.0)**
   - 다양한 시장 레짐에서 일관된 성과
   - 3년 데이터에서도 Sharpe 유지 (과적합 아님)

2. **관리 가능한 드로다운 (23-27%)**
   - B&H의 ~70% MDD 대비 크게 개선
   - 심리적으로 견딜 수 있는 수준

3. **레버리지 조절로 수익 확장 가능**
   - vol_target 증가로 리스크-리턴 트레이드오프 조절

### 전략의 한계

1. **강세장에서 B&H 대비 저조한 절대 수익**
   - 2023-2025 B&H: +427% vs TSMOM: +115%
   - 모멘텀은 추세 추종이므로 항상 뒤처짐

2. **높은 거래 비용 민감도**
   - 131 trades / 3 years = ~44 trades/year
   - 슬리피지, 스프레드에 수익 잠식

3. **레짐 전환 시 손실**
   - 급격한 반전에 대응 느림
   - V자 반등 시 손실 후 재진입

### 교훈 (Lessons Learned)

1. **리스크 조정 수익이 핵심 지표**
   - 절대 수익보다 Sharpe, Sortino, MDD 중시
   - Sharpe 1.0 이상이면 레버리지로 수익 확장 가능

2. **복잡성 ≠ 성과**
   - MTF 필터, ADX 필터 등 추가 로직이 항상 개선은 아님
   - 단순한 구조가 강건함

3. **백테스트 기간은 3년 이상**
   - 2년은 단일 레짐만 테스트될 가능성
   - 다양한 시장 환경 포함 필요

4. **vol_target > max_leverage**
   - 실제 레버리지는 vol_target / realized_vol로 결정
   - max_leverage는 상한선일 뿐

### 향후 개선 방향

1. **레짐 감지 (Phase 3)**
   - 강세/약세/횡보 레짐별 다른 파라미터 적용
   - Hidden Markov Model 또는 Volatility Regime

2. **동적 포지션 사이징 (Phase 4)**
   - 신호 강도에 비례한 포지션 크기
   - Kelly Criterion 적용

3. **다중 자산 분산**
   - BTC 단일 자산의 한계
   - ETH, SOL 등 포트폴리오 구성

---

## 폐기된 전략

### [Template] Strategy Name

**평가 일자:** YYYY-MM-DD
**상태:** ❌ 폐기
**폐기 사유:**

#### 개요
(전략 설명)

#### 테스트 결과
(성과 지표)

#### 실패 원인 분석
(왜 실패했는지)

#### 교훈
(향후 피해야 할 것)

---

## 메타 교훈 (Cross-Strategy Insights)

### 효과적인 것

- ✅ 변동성 타겟팅 (Vol Targeting)
- ✅ 헤지 숏 모드
- ✅ 3년 이상 백테스트
- ✅ Sharpe 기반 평가

### 효과 없는 것

- ❌ ADX 기반 횡보장 필터 (TSMOM에서)
- ❌ MTF 필터 (강세장에서)
- ❌ 과도한 필터링 (좋은 시그널도 제거)

### 검증 필요

- 🔄 레짐 감지 기반 파라미터 전환
- 🔄 다중 자산 포트폴리오
- 🔄 4시간봉 vs 일봉 타임프레임

---

## 변경 이력

| 날짜 | 변경 내용 |
|------|----------|
| 2026-02-06 | 초기 문서 생성, VW-TSMOM 평가 추가 |
