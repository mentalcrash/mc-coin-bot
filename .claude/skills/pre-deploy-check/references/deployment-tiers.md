# 배포 티어 상세 요구사항

## T0: Paper Trading

**목적**: 전략 로직 + EDA 시스템 통합 검증 (자금 위험 없음)

**환경:**
- EDA 백테스트 모드 (`uv run python main.py eda run`)
- 실제 시장 데이터 사용 (historical)
- 거래소 연결 없음

**통과 기준:**
- VBT vs EDA parity 확인 (수익률 부호 일치)
- 8-asset 멀티에셋 백테스트 정상 완료
- 최소 2년 데이터에서 ruin 없음 (equity > 0)
- 거래 수 합리적 (0건 아닌지 확인)

**기간**: 즉시 시작 가능

---

## T1: Testnet

**목적**: 거래소 API 연동 검증 (자금 위험 없음)

**환경:**
- Binance Testnet (testnet.binancefuture.com)
- 테스트넷 API 키 사용
- 가상 자금

**추가 요구사항 (T0 위에):**
- `load_markets()` 성공
- Market order / Limit order 생성 + 취소
- 포지션 조회 정상
- WebSocket 마켓 데이터 수신 (최소 5분)
- Rate limit 미초과 (1200 req/min)
- client_order_id 멱등성 확인

**주의:**
- 테스트넷 데이터는 메인넷과 다름 (유동성, 호가 갭)
- 테스트넷이 불안정할 수 있음 (장애 빈번)

**기간**: T0 통과 후 1-2주

---

## T2: Canary (소액 실전)

**목적**: 메인넷 환경에서 최소 자금으로 전체 플로우 검증

**환경:**
- Binance Mainnet
- 실제 API 키 (Read + Trade 권한만)
- 초기 자금: $50-$100 (잃어도 되는 금액)

**추가 요구사항 (T1 위에):**
- IP 화이트리스트 설정
- 출금 권한 제거 확인
- Decimal precision 거래소 규격 일치
- 최소 주문 금액 체크
- 포지션 동기화 로직 (시작 시 거래소 조회)
- Graceful shutdown (SIGINT → 주문 취소)
- 에러 시 Discord/Telegram 알림
- 일일 요약 리포트

**모니터링:**
- 실행 수익 vs 백테스트 기대값 비교
- 슬리피지 실측 vs 모델
- 체결 지연 시간 기록
- 에러율 < 1%

**탈출 조건 (즉시 중지):**
- 24시간 내 자금의 20% 이상 손실
- 포지션 불일치 감지
- 3회 연속 주문 실패
- 예상치 못한 exception 5회 이상

**기간**: 최소 1개월 안정 운영

---

## T3: Production

**목적**: 실제 운용 자금으로 수익 추구

**환경:**
- Binance Mainnet
- 전용 API 키 (기존 계정과 분리 권장)
- 운용 자금: 총 투자 가능 자산의 5% 이하로 시작

**추가 요구사항 (T2 위에):**
- systemd / Docker 기반 프로세스 관리
- 로그 로테이션 (7일 보관)
- 자동 재시작 + 상태 복구
- 일일/주간/월간 성과 리포트
- 비상 정지 스크립트 (1-click 전량 청산)
- 담당자 에스컬레이션 경로
- 최대 손실 한도 설정 (Hard Stop)

**자금 확대 조건:**
- 1개월 안정 운영 → 자금 2배
- 3개월 안정 운영 → 자금 추가 (총 10% 이하)
- 실행 Sharpe가 백테스트의 50% 이상 유지

**자금 축소/중지 조건:**
- 실행 MDD가 백테스트 MDD의 1.5배 초과
- 실행 Sharpe가 0 이하 (3개월 연속)
- 거래소 API 장기 장애 (24시간+)
- 시스템 에러 급증 (일 10건+)

---

## 티어 간 전환 매트릭스

```
T0 (Paper)
  │
  ├── 코드 품질 + 백테스트 + 리스크 파라미터 통과
  │   → 2주 이상 Paper 운영
  │
  ▼
T1 (Testnet)
  │
  ├── 거래소 API 정상 + 주문 cycle 검증
  │   → 1-2주 Testnet 운영
  │
  ▼
T2 (Canary)
  │
  ├── 소액 실전 + 운영 인프라 + 모니터링
  │   → 최소 1개월 안정 운영
  │
  ▼
T3 (Production)
  │
  └── 전체 체크리스트 + 롤백 계획
      → 점진적 자금 확대 (5% → 10%)
```
